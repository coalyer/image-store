GIS模块解决方案

## 针对于河南项目

目前沟通的结果是采用ArcGIS API for JavaScript的SDK，地图服务方面是调《网管GIS平台(1)》上的服务。

## ReTiNA产品GIS模块解决方案

我会在产品开发的进程中完成以下解决方案。

### 前端地图框架

（目前讨论的是采用两套SDK并行使用的策略）

针对目前已经设计出来的3个页面，使用公司GIS平台的SDK（AiMap），在此基础上进行地图框架的二次封装，形成针对于我们Team产品的GIS模块组件，我会对ReTiNA产品需要的GIS功能进行二次封装，形成针对于我们Team产品的专有的类库，并会编写对应的API帮助文档。

当公司GIS平台无法满足产品需求时，会针对于更底层的ArcGIS API for JavaScript进行二次定制开发，并封装成相应的类以供前端或后期使用。

### 地图底图服务

（目前讨论的时采用两种发布地图底图分策略）

据我了解，公司GIS平台可以提供GIS站点服务，我会通过GIS平台提供的站点发布ReTiNA产品所需的地图底图服务。

同时我也会在我们自己的服务器中安装一套我们自己内部使用的ArcGIS系列产品，也可以在我们自己的服务器中发布地图底图服务。

### 后台数据格式标准

针对目前已经设计出来的3个页面所需的数据展现来看，目前只需要经度和维度字段。而涉及到其他展现字段的，我会根据页面需求提相应的数据格式。

涉及到GIS专业性坐标转换，关系性数据库如何存空间数据等，我也会根据需求提相应的数据格式标准。

## ReTiNA产品GIS模块的调优解决方案

当地图展现的数据不是很多时（万级）时不需要特殊的调优的，但当地图展现的数据很大时（十万级）时是需要调优的。

目前考虑到一下调优方案。

### “前台渲染时进行异步渲染”方案

由于前台是单线程的，为了防止阻塞，会使用异步渲染的方式，不会一次性渲染所有数据，从而防止假死。

### “前端使用canvas的渲染方式”方案

我会针对现有的webgl开源库进行分析并从中选择一种，canvas渲染会快很多，但canvas渲染在事件绑定上有一定的局限性，我也会针对性的解决。

### “前端以聚合图层的方式展现”方案

地图上不会展现所有数据，而是以聚合点的方式，单击聚合点会展开该聚合点中点的数据。

### “后台提供可视域中心点距离固定范围内的点”方案

为了减小前台展示的压力，不会一次性取出地图区域中所有点，而是只取地图可视区域范围内的点，移动地图时会动态的调用后台提供的接口实现可视区域内图块的动态显示。

###  “后台数据发布成arcGIS服务”方案

我会对大数据量的地图要素展现发布成要素服务，前台以调用服务的方式去展现数据，避免了前台的大量渲染，但是服务是一个比较传统的方法，有一定局限性。