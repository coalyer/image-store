## Retina GIS能力梳理

### 概述

Retina GIS能力汇聚企业GIS数据，提供地图、业务图层、地图组件、高效的服务API接口等能力，以优质的服务满足您对地图的所有需求。

以下几个维度区分：

总体分为两大部分，地图可视化维度和地图交互维度，可视化维度又分地图维度和图层维度。

- 地图维度
  - 地图底图呈现
    - 提供各种在线商业地图底图的**2D呈现**能力
    - 提供各种在线商业地图底图的**3D呈现**能力
    - 提供离线地图底图**发布服务**的能力
- 图层维度
  - 业务图层加载
    - 提供各种**业务数据图层发布服务**的能力
  - 数据可视化
    - 提供各种业务数据图层**2D前端可视化和渲染**的能力
    - 提供各种业务数据图层**3D前端可视化和渲染**的能力
- 交互维度
  - Web服务API
    - 提供**专业地图操作**的能力
  - 地图交互组件
    - 提供**专业地图交互**的能力
  - GIS工具使用
    - 提供**必要的GIS专业工具**的能力

这其中的能力包括：有只使用关系数据库就能实现的**前端可视化与渲染**，有使用空间数据库的底图服务、业务图层服务、Web服务等**专业地图服务**。

### 地图维度

地图维度上的能力主要是地图底图呈现的能力，为GIS的最基础的呈现，不涉及图层维度和交互维度。

#### 地图底图呈现

**能力：**

- 提供各种在线商业地图底图的**2D呈现**能力
- 提供各种在线商业地图底图的**3D呈现**能力
- 提供离线地图底图**发布服务**的能力

##### 1. 提供各种在线商业地图底图的2D呈现能力：

提供多样式电子地图、影像图等服务能力，通过地图组件一键加载。

其可加载的地图包括：

- 付费在线地图

  - 苏研项目使用的和地图底图

    ![和地图底图](/Users/liyang/项目/我的笔记本/images/03.JS/imgs/和地图底图.png)

- 互联网地图

  - retina产品用到了百度地图、天地图等互联网地图

    ![百度地图底图](/Users/liyang/项目/我的笔记本/images/03.JS/imgs/百度地图底图.png)

- 行政区划图

  - 苏研使用的和地图的行政区划服务

  - 北京电信、北京海牛项目等使用的行政区划是行政区划图

    ![北京电信地图底图](./imgs/北京电信地图底图.png)

##### 2. 提供各种在线商业地图底图的**3D呈现**能力：

- 提供多样式电子地图、影像图等服务贴到地球球体上。

  ![电子地图底图3D](/Users/liyang/项目/我的笔记本/images/03.JS/imgs/电子地图底图3D.png)

##### 3. 提供离线地图底图**发布服务**的能力：

- CTC协助发布地图底图服务

  - 北京电信项目使用的地图底图

    ![北京电信地图底图](./imgs/北京电信地图底图.png)

- 第三方发布地图底图服务

  - 河南项目用到了arcGIS发布的地图底图

    <img src="/Users/liyang/项目/我的笔记本/images/03.JS/imgs/河南项目用到了arcGIS发布的地图底图.png" style="zoom:50%;" />

### 图层维度

#### 业务图层加载

**能力：**

- 提供各种**业务数据图层发布服务**的能力

##### 1. 提供各种**业务数据图层发布服务**的能力：

对于大数据可视化方面主要是地图图层。这里主要是OGC标准协议的地图图层服务：

- WMS图层服务

  - 北京电信项目的5G图层服务

    ![北京电信项目的5G图层服务-1](./imgs/北京电信项目的5G图层服务-1.png)

    ![北京电信项目的5G图层服务-1](./imgs/北京电信项目的5G图层服务-2.png)

  - retina产品中均势栅格服务

- WMTS图层服务

  - 之前提到的地图底图服务都是用这种图层服务

- WFS图层服务

  - 涉及到地图数据的增删改可能会用到WFS图层服务

#### 数据可视化

**能力：**

- 提供各种业务数据图层**2D前端可视化和渲染**的能力
- 提供各种业务数据图层**3D前端可视化和渲染**的能力

##### 1. 提供各种业务数据图层**2D前端可视化和渲染**的能力：

**矢量数据展现：**

- GeoJson格式

  - 苏研项目、北京电信项目GeoJson的使用来绘制行政区划

    ![北京电信地图底图](./imgs/北京电信地图底图.png)

- KML格式

  - retina产品中无线仿真对kml的使用

- WKT格式

- CSV格式

  - 模拟假数据对csv的使用

**数据可视化：**

AiMap同时集成了Echarts、MapV等，支持多种形式的数据展示。

- 点渲染

  - retina产品中基站的颜色渲染
  - 多个项目中用到了点渲染中的点聚合、点闪烁

- 线渲染

  - 用户定位用到了线渲染中的轨迹播放

    ![线渲染](./imgs/线渲染.png)

- 面渲染

  - retina产品中扇叶（小区）的颜色渲染

    ![小区图](./imgs/小区图.png)

  - 区域画像中用到的区域绘制

  - 苏研用到的行政区域绘制

- 热力图

  - 区域画像中用到了热力图

    ![热力图](./imgs/热力图.png)

- 栅格图

  - 覆盖预测、地理化栅格分析用到了栅格图

    ![栅格图](./imgs/栅格图.png)

- 泰森图

  - 暂时没用到

##### 2. 提供各种业务数据图层**3D前端可视化和渲染**的能力

- kml数据

  ![kml数据-1](./imgs/kml数据-1.jpeg)

  ![kml数据-2](./imgs/kml数据-2.jpeg)

- arcGIS server数据

  ![电子地图底图3D](/Users/liyang/项目/我的笔记本/images/03.JS/imgs/电子地图底图3D.png)

### 交互维度

#### Web服务API

**能力：**

- 提供**专业地图操作**的能力

##### 提供**专业地图操作**的能力

提供一下高效服务接口：

- POI查询

  - 苏研项目的小区、地名地址等poi搜索与定位

    ![POI搜索](./imgs/POI搜索.png)

  - 北京电信点击5G站点弹出的站点信息

    ![北京电信点击5G站点弹出的站点信息](./imgs/北京电信点击5G站点弹出的站点信息.png)

- 坐标转换

  - retina产品中大量使用了坐标转换，比如：wgs84转bd09等。

- 业务数据空间查询

  - 区域画像中区域框选小区

  - 北京电信框选查基站数

    ![北京电信框选查基站数](./imgs/北京电信框选查基站数.png)

#### 地图交互组件

**能力：**

- 提供**专业地图交互**的能力

##### 提供**专业地图交互**的能力

兼容各类浏览器，使用简单，快速实现地图交互应用。

AiMap是基于Leaflet开发的，所以拥有良好的地图交互体验，而AiMap提供很好的地图交互组件。

其基本使用、基本交互包括：

- 基础操作
  - 控制地图显示级别、显示的中心点、显示范围等
- 控件使用
  - 缩放控件
  - 比例尺控件
- 地图事件
  - 控制图层、覆盖物、信息窗口显示级别
  - 控制地图的操作权限：漫游、双击放大等
  - 区域画像框选功能
  - 多个项目使用的点击点、线、面弹信息窗口功能
- 覆盖物
  - 点渲染
  - 线渲染
  - 面渲染
- 信息窗口
  - 多个项目中的弹窗功能
  - 用户定位的标签tip功能

#### GIS工具使用

**能力：**

- 提供**必要的GIS专业工具**的能力

##### 提供**必要的GIS专业工具**的能力

这个模块都是些GIS专业中必要且简单的GIS能力的应用：

- 坐标转换
- 空间拓扑关系
  - 点线关系
  - 点面关系，如框选功能
- 面积和距离计算

